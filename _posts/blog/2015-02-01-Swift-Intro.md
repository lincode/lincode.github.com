---
layout:     post
title:      多范式编程语言－以Swift为例
category: blog
description: 以Swift为例，聊一下多范式编程语言
tags: blog
---

## 编程范式

编程范式是程序语言背后的思想。代表了程序设计者认为程序应该如何被构建和执行的看法。常见的编程范式有：过程式，面向对象，函数式，泛型编程等。

一些编程语言是专门为某种特定范式设计的，例如C语言是过程式编程语言；Smalltalk和Java是较纯粹的面向对象编程语言；Haskell是纯粹的函数式编程语言。另外一些编程语言和编程范式的关系并不一一对应，如Python，Scala，Groovy都支持面向对象和一定程度上的函数式编程。C++是多范式编程语言成功的典范。C++支持C语言式的过程式的编程范式，同时也支持面向对象编程范式，STL（（Standard Template Library）使C++具有了泛型编程能力。这可能是C++直到现在仍然具有强大的生命力的原意之一。

Swift是一门典型的多范式编程语言，即支持面向对象编程范式，也支持函数式编程范式，同时还支持泛型编程。Swift支持多种编程范式是由其目标决定的。Swift创造的初衷就是提供一门实用的工业语言。作为一门实用主义至上的语言，Swift不同于Haskell这类出自大学和研究机构的学术性质的编程语言。苹果推出Swift有着明确的商业目的：Mac OS和iOS系统的主要编程语言Objective-C已显老态，Swift将使得苹果系统的开发者拥有一门更现代的编程语言，从而促进苹果整个生态圈的良性发展。Swift的设计和开发无不体现着“实用的工业语言”这一目标。这决定了Swift无法做极端的语言实验，它需要在理智地面对现实的基础上，谨慎地寻求突破。这就决定了Swift需要继承历史遗产，照顾现在大多数程序员的现实需求，同时面向未来有所发展。

## 面向对象-继承遗产

现在绝大部分程序员的工作语言仍然是面向对象编程语言。大部分流行的现代编程语言都会允许你创建对象。使用面向对象编程语言，易于构建软件模型。因为，对象很类似乎很容易和现实世界上的所有事物和概念。但编程实践表明，并不是任何东西成为对象都是一件好事情。例如，Java中一个蹩足的例子：Java中只有对象才能作为参数传入函数（当然还有原始类型primitive type）。所以为了将函数传递给另外一个函数，你需要将函数包裹在一个对象中，通常会用一个匿名类，因为这个类不会有其他作用，只是为了让Java的一切皆为对象的设计高兴。

Java拥有纯粹的面向对象概念。它从设计之初，就希望以一切皆为对象的纯对象模型来为世界建模。但发展到现在，Java中加入了越来越多非对象的东西。引入了闭包，从而获得了函数式编程中的一级函数；引入泛型，从而获得了参数化的类型。这可能暗示了，这个世界是如此得丰富多彩，使用单一模式为世界建模并不会成功。

## 函数式编程－发展

函数式编程是一种以数学函数为编程语言建模的核心的编程范式。它将计算机运算视为数学函数计算，并且避免使用程序状态以及可变对象。

函数式编程语言并不现代，它的历史和面向对象编程一样悠久。1958年被创造出来的LISP是最古来的函数式编程语言。它比C语言年代更为久远。但直到最近它才逐渐被重视。几乎所有新发明的编程语言都或多或少受到了函数式编程思想的影响。Python，Scala，Groovy，Swift都有一级函数，闭包。使得你可以将函数直接传给另外一个函数，函数也能够以返回值形式被另一个函数返回。消除状态，提供不变性的好处越来越多被接受，Scala，Groovy，Swift都提供了方便地声明不可变对象的方法，以支持你编写更趋近于函数式的风格的代码。

函数编程语言有其优秀的地方，也许将来会成为一个重要的编程范式。但是，函数式编程语言的重要性可能更多会体现在影响其他编程语言的发展。未来，可能很难出现一门主要以函数式编程范式设计的编程语言成为主流的编程语言。如同Java这样的以单一编程范式（面向对象）构建，而成为主流的编程语言的机会应该不多了。而如同Haskell这样追求纯粹的函数式编程语言，更多的可能只是一个偏学术的语言实验。

再重复一次上一节的提到理由，这个世界是如此得丰富多彩，使用单一模式为世界建模并不会成功。

## 面向对象与函数式编程

如果，我们按语言范式给现在流行的语言分类。支持面向对象的编程语言应该是队伍最长的那一个。现在大部分流行的现代编程语言都是面相对象的，它们都会允许你创建对象。同时，你会发现比较流行的几个编程语言，Python，Scala，甚至Java都或多或少得受到了函数式编程语言的影响。它们会引入一些函数式编程的概念，让你一定程度上可以编写出具有函数式风格的代码。

在熟悉了类面向对象编程语言之后，再接触函数式编程语言，常常会觉得耳目一新，甚至会隐约觉得函数式语言是救世良方。那我们是否应该就此彻底转向函数式编程语言呢？

确实面向对象编程语言，在大规模实践之后，我们更深刻地了解了它们的缺点（例如，难以编写多线程环境下的软件应用；继承并不是代码复用的好方法）。函数式语言也确实有不少优点，有些优点恰恰就能解决面向对象语言的问题（纯函数十分适应多线程环境，纯函数天生就是模块化的，对于代码复用十分友好）。但是，函数式编程也许也存在某些问题。而这些问题，可能需要更大规模的业界实践才会暴露出来。现在我们已经可以相信，单纯以对象为世界建模是有困难的一样，以数学模型来为世界建模可能并不会好到哪里去。可以确信的是，他们都有自己擅长的领域和环境。我们现在仍然还无法使用某种编程范式来解决所有问题。

而更大的现实是无数企业已经在面向对象编程语言上做了巨大的投资，即使现在面向对象编程已经暴露出一些问题，而函数式编程又呈现出不少能解决这些问题的优点，任何一个谨慎的人都不会，也不可能马上抛弃面向对象编程，彻底全面地转向函数式编程语言。

现实的选择是支持面向对象编程的同时，提供函数式的支持。这样，在大部分面向对象游刃有余的地方，你仍然可以使用面向对象的方法。而在适合函数式编程的地方，而你又拥有函数式编程的思维和能力时，你还是可以函数式的编程方法改善生产力。

## 泛型编程-美好的点缀

泛型编程是另外一个有趣的话题。泛型为程语言提供了更高层级的抽象，即参数化类型。换句话说，就是把一个原本特定于某个类型的算法或类当中的类型信息抽象出来。

这个抽象出来的概念就是模版（Template）在C++的STL（Standard Template Library）中成为模版。STL展示了泛型编程的强大之处，是C++的强大武器。除C++之外，C#，Java，Haskell等编程语言都引入了泛型概念。

泛型编程是一个稍微局部一些的概念，它仅仅涉及如何更抽象地处理类型，即参数化类型。这并不足以支撑起一门语言的核心概念。我们不会听到一个编程语言是纯泛型编程的，而没有其他编程范式。但正因为泛型并不会改变程序语言的核心，所以在大多数时候，它可以很好的融入到其他的编程方式中，C++，Scala，Haskell这些风格迥异的编程语言都支持泛型。泛型编程提供了更高的抽象层次，这意味着更强的表达能力。这对大部分编程语言来说都是一道美味佐餐美酒。

在Swift中，泛型得到广泛使用，许多Swift标准库是通过泛型代码构建出来的。例如Swift的数组和字典类型都是泛型集。

## 总结

这几篇系列文章中，将主要讲解以Swift为例，讲解多范式编程语言。会分三部分讨论Swift所支持三种编程范式：

- 面向对象编程范式
- 函数式编程范式
- 泛型编程
