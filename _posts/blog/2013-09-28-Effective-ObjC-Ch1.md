---
layout:    post
title:     Effective Objective-C 2.0 Chapter 1
category:  blog
description: 了解 Objective-C
tags: ObjC
---

# 第1章 了解 Objective-C
Objective-C 在 C 的基础上添加新语法，从而带来了面向对象特性。Objective-C 语法大量使用方括号并且不耻于使用冗长的方法名。这样的源代码很易读，但是对于 java 和 C++ 开发者来说通常会有点难理解。

学写 Objective-C 并不困难，但是其中有很多错综复杂的地方需要注意，以及一些常常被湖忽视的特性。同样，有些特性被滥用了或者没有被完全理解，这导致产出的代码难于维护和调试。这一章覆盖了基础话题；后续章节覆盖语言和相关库的特定领域。

## 条目 1：熟悉 Objective-C 的根源

* Objective-C 是 C 的超集，加入了面向对象特性。Objective-C 使用动态绑定的消息分发机制，这意味着对象的类型是在运行时才被发现的。运行时，而不是编译器，决定了那段代码会在接收到消息后运行。

* 理解 C 的核心概念将有助于你写出高效的 Objective-C 代码。特别是要理解内存模型和指针。


## 条目 2：减少在头文件引入头文件

* 总是尽可能拖后引用头文件。这通常意味着在头文件中使用前向声明，而在实现文件中引入对应的头文件。这样做可以做到尽可能地避免类之间的耦合。

* 有时，无法做到前向声明，比如当声明遵守协议的时候。这种情况下，如果可能，考虑把遵守协议的声明放入类的分类中。否则，只引入定义了协议的头文件。


## 条目 3：文字语法优于与其等价的方法

* 使用文字语法创建字符串，数字，数组，和字典。这比使用普通的创建对象方法更为清楚和简洁。

* 索引数组或者在字典中取值使用下标方法。

* 试图向数组或者字典插入 nil 会导致异常被抛出。因此，要确认插入值不为 nil。  

## 条目 4：常量优于预处理 ＃define

* 避免预处理定义。它们不包含个人和类型信息，编译器只是简单地查找和替换。他们可能被重定义而无任何警告，在一个应用中产生不同地不一致的值。

* 在实现文件中，以 static const 定义单元明确可翻译的常量。这些常量将不会被暴露在全局符号表中，所以它们的名字无需注意名字空间问题。

* 在头文件中将全局常量定义为外部的，再在相关的实现文件中定义它们。这些常量将出现在全局符号表中。所以，它们的名字应该注意名字空间问题，通常是在它们将它们所属类的名字为前缀。


## 条目 5：表达状态，可选项，状态码时使用枚举

* 使用枚举给予状态机的状态，传递给方法的选项或者错误代码的值以可读的名字。

* 如果一个枚举类型定义了传递给方法的可以同时使用的选项，将其值定义为 2 的幂，以使得多个值可以通过位或操作同时使用。

* 使用 NS_ENUM 和 NS_OPTIONS 宏定义以显式类型定义的枚举类型。这么做意味着枚举成员的类型被确保为我们选择的类型，而不是编译器选择的类型。

* 在一个处理枚举类型的 switch 语句中不要实现 default case。这将有所帮助。因为，如果你添加了枚举项，编译器将警告 switch 没有处理所有的枚举值。