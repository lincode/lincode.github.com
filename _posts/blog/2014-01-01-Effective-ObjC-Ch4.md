---
layout:    post
title:     Effective Objective-C 2.0 Chapter 4
category:  blog
description: 协议和目录
tags: ObjC
---

# 第 4 章 协议和目录
协议(Protocols)是类似于 Java 中的接口的语言特性。Objective-C 没有多重继承，所以协议提供了定义一个定义一组类必须实现的方法集合的途径。协议常常被用于实现代理模式(见条目 23)。但也有其他的用法。知道它们，使用它们可以使代码更可维护，因为它们就如同你的代码的接口的良好文档一样。

目录(Categories)也是 Objective-C 的重要语言特性。它们提供一种不用如同在其他语言中必须继承类，而向类添加方法的机制。之所以能有这个特性，是源于运行时的高动态性，但同时在使用之前你必须理解目录这个新概念。

## 条目 23 ： 在对象间通信时，使用代理和数据源协议
* 使用代理模式，以为那些需要通知其他对象相关事件的对象提供一个接口。
* 以一些潜在可选方法定义协议，从而定义一个你的代理应该支持的接口。
* 当对象需要从另外一个对象获得数据时，使用代理模式。在这种情况下，它通常被认为是一个数据源。
* 如果需要，实现位结构以缓存代理是否可以对某些方法做出反应。

## 条目 24 ： 使用目录将类实现分割成易管理的段
* 使用目录将类实现切分为更容易管理的片段。
* 创建一个名为 Private 的目录，以隐藏那些应该被视为私有的方法的实现细节。

## 条目 25 ： 第三方类的目录名总是要有前缀
* 总是计划好加为那些不是你自己的类的目录添加前缀。
* 总是计划好为那些不是你自己的类的目录里的方法添加前缀。

## 条目 26 ： 目录中要避免使用属性
* 保持所有封装数据的属性声明都在主接口中定义
* 在目录中访问方法要优于属性声明，除非它是一个类的附加目录

## 条目 27 ： 使用类的附加目录隐藏实现细节
* 使用类的附加目录为类增加实例变量。
* 如果属性在主接口中是只读的，但是在类内部要求是可读写的，可以在类的附加目录中将属性重新声明为可读写。
* 在类的附加目录中为私有方法声明方法原型。
* 如果你希望你的类应该遵守的协议是私有的内部协议，可以使用类的附加目录声明你的类应该遵守的协议。

## 条目 28 ： 使用协议提供匿名对象
典型匿名对象：
	
	@property (nonatomic, weak) id<EOCDelegate> delegate;

* 协议可以被用于提供某种程度的类型匿名性。类型可以被用于抽象为实现了协议方法的 id 类型。
* 当类型（类名）应该被隐藏时，使用匿名类。
* 当类型不重要而它能对某些特定方法（定义在协议里的）做出反应时，使用匿名对象。